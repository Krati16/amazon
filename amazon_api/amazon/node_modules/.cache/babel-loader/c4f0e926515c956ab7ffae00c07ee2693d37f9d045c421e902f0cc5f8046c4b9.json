{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = void 0;\nfunction create(grid) {\n  var dirty = true;\n  var unbindDrawHandler = null;\n  function listenForDraw() {\n    if (!unbindDrawHandler) {\n      unbindDrawHandler = grid.eventLoop.bind('grid-draw', function () {\n        dirtyCleanInstance.setClean();\n      });\n    }\n  }\n  var dirtyCleanInstance = {\n    isDirty: function () {\n      return dirty;\n    },\n    isClean: function () {\n      return !dirty;\n    },\n    setDirty: function () {\n      dirty = true;\n      if (grid.requestDraw) {\n        grid.requestDraw();\n      }\n    },\n    setClean: function () {\n      dirty = false;\n    },\n    disable: function () {\n      if (unbindDrawHandler) {\n        unbindDrawHandler();\n        unbindDrawHandler = null;\n      }\n    },\n    enable: function () {\n      listenForDraw();\n    }\n  };\n  dirtyCleanInstance.enable();\n  return dirtyCleanInstance;\n}\nexports.create = create;\nexports.default = create;","map":{"version":3,"names":["create","grid","dirty","unbindDrawHandler","listenForDraw","eventLoop","bind","dirtyCleanInstance","setClean","isDirty","isClean","setDirty","requestDraw","disable","enable","exports","default"],"sources":["C:\\amazon\\amazon\\node_modules\\grid\\src\\modules\\dirty-clean\\index.ts"],"sourcesContent":["import { Grid } from '../core';\n\nexport interface IDirtyClean {\n    isDirty(): boolean;\n    isClean(): boolean;\n    setDirty(): void;\n    setClean(): void;\n    disable(): void;\n    enable(): void;\n}\n\nexport function create(grid: Grid) {\n    let dirty = true;\n\n    let unbindDrawHandler: (() => void) | null = null;\n\n    function listenForDraw() {\n        if (!unbindDrawHandler) {\n            unbindDrawHandler = grid.eventLoop.bind('grid-draw', () => {\n                dirtyCleanInstance.setClean();\n            });\n        }\n    }\n\n    const dirtyCleanInstance: IDirtyClean = {\n        isDirty() {\n            return dirty;\n        },\n        isClean() {\n            return !dirty;\n        },\n        setDirty() {\n            dirty = true;\n            // when things are initalizing sometimes this doesn't exist yet\n            // we have to hope that at the end of initialization the grid will call request draw itself\n            if (grid.requestDraw) {\n                grid.requestDraw();\n            }\n        },\n        setClean() {\n            dirty = false;\n        },\n        disable() {\n            if (unbindDrawHandler) {\n                unbindDrawHandler();\n                unbindDrawHandler = null;\n            }\n        },\n        enable() {\n            listenForDraw();\n        }\n    };\n\n    dirtyCleanInstance.enable();\n\n    return dirtyCleanInstance;\n}\n\nexport default create;"],"mappings":";;;;;;AAWA,SAAgBA,MAAMA,CAACC,IAAU;EAC7B,IAAIC,KAAK,GAAG,IAAI;EAEhB,IAAIC,iBAAiB,GAAwB,IAAI;EAEjD,SAASC,aAAaA,CAAA;IAClB,IAAI,CAACD,iBAAiB,EAAE;MACpBA,iBAAiB,GAAGF,IAAI,CAACI,SAAS,CAACC,IAAI,CAAC,WAAW,EAAE;QACjDC,kBAAkB,CAACC,QAAQ,EAAE;MACjC,CAAC,CAAC;;EAEV;EAEA,IAAMD,kBAAkB,GAAgB;IACpCE,OAAO,WAAAA,CAAA;MACH,OAAOP,KAAK;IAChB,CAAC;IACDQ,OAAO,WAAAA,CAAA;MACH,OAAO,CAACR,KAAK;IACjB,CAAC;IACDS,QAAQ,WAAAA,CAAA;MACJT,KAAK,GAAG,IAAI;MAGZ,IAAID,IAAI,CAACW,WAAW,EAAE;QAClBX,IAAI,CAACW,WAAW,EAAE;;IAE1B,CAAC;IACDJ,QAAQ,WAAAA,CAAA;MACJN,KAAK,GAAG,KAAK;IACjB,CAAC;IACDW,OAAO,WAAAA,CAAA;MACH,IAAIV,iBAAiB,EAAE;QACnBA,iBAAiB,EAAE;QACnBA,iBAAiB,GAAG,IAAI;;IAEhC,CAAC;IACDW,MAAM,WAAAA,CAAA;MACFV,aAAa,EAAE;IACnB;GACH;EAEDG,kBAAkB,CAACO,MAAM,EAAE;EAE3B,OAAOP,kBAAkB;AAC7B;AA7CAQ,OAAA,CAAAf,MAAA,GAAAA,MAAA;AA+CAe,OAAA,CAAAC,OAAA,GAAehB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}