{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = void 0;\nvar header_decorators_1 = require(\"../header-decorators\");\nfunction create(grid) {\n  var api = {\n    annotateDecorator: annotateDecorator\n  };\n  function annotateDecorator(headerDecorator) {\n    var col = headerDecorator.left;\n    headerDecorator._dragLine = grid.decorators.create(0, undefined, Infinity, 1, 'px', 'real');\n    headerDecorator._dragLine.fixed = true;\n    headerDecorator._dragLine.postRender = function (div) {\n      div.setAttribute('class', 'grid-drag-line');\n    };\n    headerDecorator._onMousedown = function (e) {\n      grid.eventLoop.stopBubbling(e);\n    };\n    headerDecorator._onDragStart = function (e) {\n      grid.eventLoop.stopBubbling(e);\n      grid.decorators.add(headerDecorator._dragLine);\n      headerDecorator._unbindDrag = grid.eventLoop.bind('grid-drag', function (gridDragEvent) {\n        var minX = headerDecorator.getDecoratorLeft() + 22;\n        headerDecorator._dragLine.left = Math.max(gridDragEvent.gridX, minX);\n      });\n      headerDecorator._unbindKeyDown = grid.escapeStack.add(removeDecoratorsAndUnbind);\n      headerDecorator._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', function () {\n        var dragLeft = headerDecorator._dragLine.left;\n        if (dragLeft !== undefined && col !== undefined) {\n          var newWidth_1 = dragLeft - headerDecorator.getDecoratorLeft();\n          grid.view.col.get(col).width = newWidth_1;\n          grid.colModel.getSelected().forEach(function (dataIdx) {\n            grid.data.col.get(dataIdx).width = newWidth_1;\n          });\n        }\n        removeDecoratorsAndUnbind();\n      });\n      function removeDecoratorsAndUnbind() {\n        grid.decorators.remove(headerDecorator._dragLine);\n        if (headerDecorator._unbindDrag) {\n          headerDecorator._unbindDrag();\n        }\n        if (headerDecorator._unbindDragEnd) {\n          headerDecorator._unbindDragEnd();\n        }\n        if (headerDecorator._unbindKeyDown) {\n          headerDecorator._unbindKeyDown();\n        }\n        return true;\n      }\n    };\n    headerDecorator.postRender = function (div) {\n      div.style.transform = 'translateX(50%)';\n      div.style.webkitTransform = 'translateX(50%)';\n      div.style.removeProperty('left');\n      div.setAttribute('class', 'col-resize');\n      div.setAttribute('dts', 'grid_header_resize');\n      grid.eventLoop.bind(div, 'grid-drag-start', headerDecorator._onDragStart);\n      grid.eventLoop.bind(div, 'mousedown', headerDecorator._onMousedown);\n    };\n  }\n  header_decorators_1.default(grid, api);\n  return api;\n}\nexports.create = create;\nexports.default = create;","map":{"version":3,"names":["header_decorators_1","require","create","grid","api","annotateDecorator","headerDecorator","col","left","_dragLine","decorators","undefined","Infinity","fixed","postRender","div","setAttribute","_onMousedown","e","eventLoop","stopBubbling","_onDragStart","add","_unbindDrag","bind","gridDragEvent","minX","getDecoratorLeft","Math","max","gridX","_unbindKeyDown","escapeStack","removeDecoratorsAndUnbind","_unbindDragEnd","dragLeft","newWidth_1","view","get","width","colModel","getSelected","forEach","dataIdx","data","remove","style","transform","webkitTransform","removeProperty","default","exports"],"sources":["C:\\amazon\\amazon\\node_modules\\grid\\src\\modules\\col-resize\\index.ts"],"sourcesContent":["import { Grid } from '../core';\nimport { IDecorator } from '../decorators';\nimport { AnnotatedMouseEventUnion, IGridDragStartEvent } from '../event-loop';\nimport addHeaderDecorators, { IHeaderDecorator } from '../header-decorators';\n\nexport interface IResizeHeader extends IHeaderDecorator {\n    _dragLine: IDecorator;\n    _onMousedown(e: AnnotatedMouseEventUnion): void;\n    _onDragStart(e: IGridDragStartEvent): void;\n    _unbindDrag?(): void;\n    _unbindKeyDown?(): void;\n    _unbindDragEnd?(): void;\n}\n\nexport interface IColResize {\n    annotateDecorator(d: IResizeHeader): void;\n}\n\nexport function create(grid: Grid) {\n\n    const api: IColResize = {\n        annotateDecorator\n    };\n\n    function annotateDecorator(headerDecorator: IResizeHeader) {\n        const col = headerDecorator.left;\n        headerDecorator._dragLine = grid.decorators.create(0, undefined, Infinity, 1, 'px', 'real');\n        headerDecorator._dragLine.fixed = true;\n\n        headerDecorator._dragLine.postRender = (div) => {\n            div.setAttribute('class', 'grid-drag-line');\n        };\n\n        headerDecorator._onMousedown = (e) => {\n            // prevent mousedowns from getting to selection if they hit the dragline\n            grid.eventLoop.stopBubbling(e);\n        };\n\n        headerDecorator._onDragStart = (e) => {\n\n            grid.eventLoop.stopBubbling(e);\n\n            grid.decorators.add(headerDecorator._dragLine);\n\n            headerDecorator._unbindDrag = grid.eventLoop.bind('grid-drag', (gridDragEvent) => {\n                const minX = headerDecorator.getDecoratorLeft() + 22;\n                headerDecorator._dragLine.left = Math.max(gridDragEvent.gridX, minX);\n            });\n\n            headerDecorator._unbindKeyDown = grid.escapeStack.add(removeDecoratorsAndUnbind);\n\n            headerDecorator._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', () => {\n                const dragLeft = headerDecorator._dragLine.left;\n                if (dragLeft !== undefined && col !== undefined) {\n                    const newWidth = dragLeft - headerDecorator.getDecoratorLeft();\n                    grid.view.col.get(col).width = newWidth;\n                    grid.colModel.getSelected().forEach((dataIdx) => {\n                        grid.data.col.get(dataIdx).width = newWidth;\n                    });\n                }\n                removeDecoratorsAndUnbind();\n            });\n\n            function removeDecoratorsAndUnbind() {\n                grid.decorators.remove(headerDecorator._dragLine);\n                if (headerDecorator._unbindDrag) {\n                    headerDecorator._unbindDrag();\n                }\n                if (headerDecorator._unbindDragEnd) {\n                    headerDecorator._unbindDragEnd();\n                }\n                if (headerDecorator._unbindKeyDown) {\n                    headerDecorator._unbindKeyDown();\n                }\n                return true; // for the escape stack\n            }\n        };\n\n        headerDecorator.postRender = (div) => {\n            div.style.transform = 'translateX(50%)';\n            div.style.webkitTransform = 'translateX(50%)';\n\n            div.style.removeProperty('left');\n            div.setAttribute('class', 'col-resize');\n            div.setAttribute('dts', 'grid_header_resize');\n\n            grid.eventLoop.bind(div, 'grid-drag-start', headerDecorator._onDragStart);\n            grid.eventLoop.bind(div, 'mousedown', headerDecorator._onMousedown);\n        };\n    }\n\n    addHeaderDecorators(grid, api);\n\n    return api;\n}\n\nexport default create;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}