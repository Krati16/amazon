{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = void 0;\nvar custom_event_1 = require(\"../custom-event\");\nvar event_loop_1 = require(\"../event-loop\");\nvar PROPS_TO_COPY_FROM_MOUSE_EVENTS = ['clientX', 'clientY', 'gridX', 'gridY', 'layerX', 'layerY', 'row', 'col', 'realRow', 'realCol', 'virtualRow', 'virtualCol'];\nfunction create(grid) {\n  var scrollInterval;\n  var lastMoveRow;\n  var lastMoveCol;\n  var model = {\n    rowInfo: {\n      view: function (e) {\n        return e.realRow;\n      },\n      virtual: function (e) {\n        return e.virtualRow;\n      },\n      data: function (e) {\n        return e.row;\n      },\n      gridPx: function (e) {\n        return e.gridY;\n      },\n      layerPx: function (e) {\n        return e.layerY;\n      }\n    },\n    colInfo: {\n      view: function (e) {\n        return e.realCol;\n      },\n      virtual: function (e) {\n        return e.virtualCol;\n      },\n      data: function (e) {\n        return e.col;\n      },\n      gridPx: function (e) {\n        return e.gridX;\n      },\n      layerPx: function (e) {\n        return e.layerX;\n      }\n    },\n    _annotateEvent: function (e) {\n      if (event_loop_1.isAnnotatedMouseEvent(e)) {\n        model._annotateEventInternal(e);\n      }\n    },\n    _annotateEventFromViewCoords: function (e, viewRow, viewCol) {\n      e.realRow = viewRow;\n      e.realCol = viewCol;\n      e.virtualRow = grid.view.row.toVirtual(e.realRow);\n      e.virtualCol = grid.view.col.toVirtual(e.realCol);\n      e.row = grid.virtual.row.toData(e.virtualRow);\n      e.col = grid.virtual.col.toData(e.virtualCol);\n      return e;\n    },\n    _annotateEventInternal: function (e) {\n      var y = grid.viewPort.toGridY(e.clientY);\n      var x = grid.viewPort.toGridX(e.clientX);\n      var viewRow = grid.rows.viewPort.toViewFromPx(y);\n      var viewCol = grid.cols.viewPort.toViewFromPx(x);\n      model._annotateEventFromViewCoords(e, viewRow, viewCol);\n      e.gridX = x;\n      e.gridY = y;\n    }\n  };\n  grid.eventLoop.addInterceptor(function (e) {\n    model._annotateEvent(e);\n    if (event_loop_1.isAnnotatedMouseEventOfType(e, 'mousedown')) {\n      if (e.currentTarget === grid.container) {\n        setupDragEventForMouseDown(e);\n      }\n    } else if (event_loop_1.isAnnotatedMouseEventOfType(e, 'mousemove')) {\n      if (e.row !== lastMoveRow || e.col !== lastMoveCol) {\n        createAndFireCustomMouseEvent('grid-cell-mouse-move', e);\n        lastMoveRow = e.row;\n        lastMoveCol = e.col;\n      }\n    }\n  });\n  function calculateColScrollDiff(e) {\n    var colDiff = 0;\n    if (e.clientX > (grid.container && grid.container.getBoundingClientRect().right || window.innerWidth)) {\n      colDiff = 1;\n    } else if (grid.viewPort.toGridX(e.clientX) < grid.virtualPixelCellModel.fixedWidth()) {\n      colDiff = -1;\n    }\n    return colDiff;\n  }\n  function calculateRowScrollDiff(e) {\n    var rowDiff = 0;\n    if (e.clientY > (grid.container && grid.container.getBoundingClientRect().bottom || window.innerHeight)) {\n      rowDiff = 1;\n    } else if (grid.viewPort.toGridY(e.clientY) < grid.virtualPixelCellModel.fixedHeight()) {\n      rowDiff = -1;\n    }\n    return rowDiff;\n  }\n  function setupDragEventForMouseDown(downEvent) {\n    var lastDragRow = downEvent.row;\n    var lastDragCol = downEvent.col;\n    var dragStarted = false;\n    var unbindAutoScrollDrag;\n    var lastX = downEvent.clientX;\n    var lastY = downEvent.clientY;\n    var unbindMove = grid.eventLoop.bind(window, 'mousemove', function (mousemoveEvent) {\n      if (dragStarted && !mousemoveEvent.which) {\n        handleMouseUp(mousemoveEvent);\n        return;\n      }\n      if (!dragStarted) {\n        if (lastX === mousemoveEvent.clientX && lastY === mousemoveEvent.clientY) {\n          console.warn('Got a mouse move event with ', mousemoveEvent.clientX, ',', mousemoveEvent.clientY, ' when the last position was ', lastX, ',', lastY);\n        }\n        createAndFireCustomMouseEvent('grid-drag-start', downEvent, function (dragStart) {\n          var onlyFixedRows = !calculateRowScrollDiff(mousemoveEvent);\n          var onlyFixedCols = !calculateColScrollDiff(mousemoveEvent);\n          dragStart.enableAutoScroll = function () {\n            if (unbindAutoScrollDrag) {\n              unbindAutoScrollDrag();\n            }\n            unbindAutoScrollDrag = grid.eventLoop.bind('grid-drag', function (gridDragEvent) {\n              var newRowDiff = calculateRowScrollDiff(gridDragEvent);\n              onlyFixedRows = !newRowDiff;\n              var rowDiff = onlyFixedRows ? 0 : newRowDiff;\n              var newColDiff = calculateColScrollDiff;\n              onlyFixedCols = !newColDiff;\n              var colDiff = onlyFixedCols ? 0 : newColDiff(gridDragEvent);\n              if (scrollInterval != undefined) {\n                clearInterval(scrollInterval);\n              }\n              if (rowDiff || colDiff) {\n                scrollInterval = grid.interval(function () {\n                  grid.cellScrollModel.scrollTo(grid.cellScrollModel.row + rowDiff, grid.cellScrollModel.col + colDiff);\n                }, 100);\n              }\n            });\n          };\n        });\n        dragStarted = true;\n      }\n      createAndFireCustomMouseEvent('grid-drag', mousemoveEvent);\n      if (mousemoveEvent.row !== lastDragRow || mousemoveEvent.col !== lastDragCol) {\n        createAndFireCustomMouseEvent('grid-cell-drag', mousemoveEvent);\n        lastDragRow = mousemoveEvent.row;\n        lastDragCol = mousemoveEvent.col;\n      }\n    });\n    var unbindUp = grid.eventLoop.bind(window, 'mouseup', handleMouseUp);\n    function handleMouseUp(e) {\n      if (scrollInterval != undefined) {\n        clearInterval(scrollInterval);\n      }\n      unbindMove();\n      unbindUp();\n      if (unbindAutoScrollDrag) {\n        unbindAutoScrollDrag();\n      }\n      var dragEnd = createCustomEventFromMouseEvent('grid-drag-end', e);\n      grid.eventLoop.fire(dragEnd);\n    }\n  }\n  function createCustomEventFromMouseEvent(type, e) {\n    var event = custom_event_1.default(type, true, true);\n    PROPS_TO_COPY_FROM_MOUSE_EVENTS.forEach(function (prop) {\n      event[prop] = e[prop];\n    });\n    event.originalEvent = e;\n    return event;\n  }\n  function createAndFireCustomMouseEvent(type, e, annotateEvent) {\n    var drag = createCustomEventFromMouseEvent(type, e);\n    if (annotateEvent) {\n      drag = annotateEvent(drag) || drag;\n    }\n    if (e.target) {\n      e.target.dispatchEvent(drag);\n    } else {\n      grid.eventLoop.fire(drag);\n    }\n    return drag;\n  }\n  return model;\n}\nexports.create = create;\nexports.default = create;","map":{"version":3,"names":["custom_event_1","require","event_loop_1","PROPS_TO_COPY_FROM_MOUSE_EVENTS","create","grid","scrollInterval","lastMoveRow","lastMoveCol","model","rowInfo","view","e","realRow","virtual","virtualRow","data","row","gridPx","gridY","layerPx","layerY","colInfo","realCol","virtualCol","col","gridX","layerX","_annotateEvent","isAnnotatedMouseEvent","_annotateEventInternal","_annotateEventFromViewCoords","viewRow","viewCol","toVirtual","toData","y","viewPort","toGridY","clientY","x","toGridX","clientX","rows","toViewFromPx","cols","eventLoop","addInterceptor","isAnnotatedMouseEventOfType","currentTarget","container","setupDragEventForMouseDown","createAndFireCustomMouseEvent","calculateColScrollDiff","colDiff","getBoundingClientRect","right","window","innerWidth","virtualPixelCellModel","fixedWidth","calculateRowScrollDiff","rowDiff","bottom","innerHeight","fixedHeight","downEvent","lastDragRow","lastDragCol","dragStarted","unbindAutoScrollDrag","lastX","lastY","unbindMove","bind","mousemoveEvent","which","handleMouseUp","console","warn","dragStart","onlyFixedRows","onlyFixedCols","enableAutoScroll","gridDragEvent","newRowDiff","newColDiff","undefined","clearInterval","interval","cellScrollModel","scrollTo","unbindUp","dragEnd","createCustomEventFromMouseEvent","fire","type","event","default","forEach","prop","originalEvent","annotateEvent","drag","target","dispatchEvent","exports"],"sources":["C:\\amazon\\amazon\\node_modules\\grid\\src\\modules\\cell-mouse-model\\index.ts"],"sourcesContent":["import { Grid } from '../core';\nimport customEvent from '../custom-event';\nimport {\n  AnnotatedMouseEventUnion,\n  EventUnion,\n  GridCustomMouseEventTypes,\n  IAnnotatedEvent,\n  IAnnotatedMouseEvent,\n  IGridCustomMouseEvent,\n  IGridDragStartEvent,\n  ILoopEvent,\n  isAnnotatedMouseEvent,\n  isAnnotatedMouseEventOfType,\n} from '../event-loop';\n\nconst PROPS_TO_COPY_FROM_MOUSE_EVENTS: Array<keyof AnnotatedMouseEventUnion | 'layerX' | 'layerY'> = [\n  'clientX',\n  'clientY',\n  'gridX',\n  'gridY',\n  'layerX',\n  'layerY',\n  'row',\n  'col',\n  'realRow',\n  'realCol',\n  'virtualRow',\n  'virtualCol',\n];\n\nexport interface IEventDimensionInfoGetter {\n  view(e: IAnnotatedEvent): number;\n  virtual(e: IAnnotatedEvent): number;\n  data(e: IAnnotatedEvent): number;\n  gridPx(e: IAnnotatedMouseEvent): number;\n  layerPx(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent): number;\n}\n\nexport interface ICellMouseModel {\n  rowInfo: IEventDimensionInfoGetter;\n  colInfo: IEventDimensionInfoGetter;\n  _annotateEvent(e: EventUnion): void;\n  _annotateEventInternal(e: AnnotatedMouseEventUnion): void;\n  _annotateEventFromViewCoords(e: AnnotatedMouseEventUnion, viewRow: number, viewCol: number): EventUnion;\n}\n\nexport function create(grid: Grid) {\n  let scrollInterval: number | undefined;\n  let lastMoveRow: number | undefined;\n  let lastMoveCol: number | undefined;\n  const model: ICellMouseModel = {\n    rowInfo: {\n      view(e: IAnnotatedEvent) {\n        return e.realRow;\n      },\n      virtual(e: IAnnotatedEvent) {\n        return e.virtualRow;\n      },\n      data(e: IAnnotatedEvent) {\n        return e.row;\n      },\n      gridPx(e: IAnnotatedMouseEvent) {\n        return e.gridY;\n      },\n      layerPx(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n        return (e as any).layerY;\n      },\n    },\n    colInfo: {\n      view(e: IAnnotatedEvent) {\n        return e.realCol;\n      },\n      virtual(e: IAnnotatedEvent) {\n        return e.virtualCol;\n      },\n      data(e: IAnnotatedEvent) {\n        return e.col;\n      },\n      gridPx(e: IAnnotatedMouseEvent) {\n        return e.gridX;\n      },\n      layerPx(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n        return (e as any).layerX;\n      },\n    },\n    _annotateEvent(e: EventUnion) {\n      if (isAnnotatedMouseEvent(e)) {\n        model._annotateEventInternal(e);\n      }\n    },\n    _annotateEventFromViewCoords(e: AnnotatedMouseEventUnion, viewRow: number, viewCol: number) {\n      e.realRow = viewRow;\n      e.realCol = viewCol;\n      e.virtualRow = grid.view.row.toVirtual(e.realRow);\n      e.virtualCol = grid.view.col.toVirtual(e.realCol);\n      e.row = grid.virtual.row.toData(e.virtualRow);\n      e.col = grid.virtual.col.toData(e.virtualCol);\n      return e;\n    },\n    _annotateEventInternal(e: AnnotatedMouseEventUnion) {\n      const y = grid.viewPort.toGridY(e.clientY);\n      const x = grid.viewPort.toGridX(e.clientX);\n      const viewRow = grid.rows.viewPort.toViewFromPx(y);\n      const viewCol = grid.cols.viewPort.toViewFromPx(x);\n      model._annotateEventFromViewCoords(e, viewRow, viewCol);\n      e.gridX = x;\n      e.gridY = y;\n    },\n  };\n\n  grid.eventLoop.addInterceptor((e: EventUnion) => {\n    model._annotateEvent(e);\n    if (isAnnotatedMouseEventOfType(e, 'mousedown')) {\n      if (e.currentTarget === grid.container) {\n        setupDragEventForMouseDown(e);\n      }\n    } else if (isAnnotatedMouseEventOfType(e, 'mousemove')) {\n      if (e.row !== lastMoveRow || e.col !== lastMoveCol) {\n        createAndFireCustomMouseEvent('grid-cell-mouse-move', e);\n        lastMoveRow = e.row;\n        lastMoveCol = e.col;\n      }\n    }\n  });\n\n  function calculateColScrollDiff(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n    let colDiff = 0;\n    if (e.clientX > ((grid.container && grid.container.getBoundingClientRect().right) || window.innerWidth)) {\n      colDiff = 1;\n    } else if (grid.viewPort.toGridX(e.clientX) < grid.virtualPixelCellModel.fixedWidth()) {\n      colDiff = -1;\n    }\n    return colDiff;\n  }\n\n  function calculateRowScrollDiff(e: AnnotatedMouseEventUnion | IGridCustomMouseEvent) {\n    let rowDiff = 0;\n    if (e.clientY > ((grid.container && grid.container.getBoundingClientRect().bottom) || window.innerHeight)) {\n      rowDiff = 1;\n    } else if (grid.viewPort.toGridY(e.clientY) < grid.virtualPixelCellModel.fixedHeight()) {\n      rowDiff = -1;\n    }\n    return rowDiff;\n  }\n\n  function setupDragEventForMouseDown(downEvent: AnnotatedMouseEventUnion) {\n    let lastDragRow = downEvent.row;\n    let lastDragCol = downEvent.col;\n    let dragStarted = false;\n    let unbindAutoScrollDrag: (() => void) | undefined;\n    const lastX = downEvent.clientX;\n    const lastY = downEvent.clientY;\n    const unbindMove = grid.eventLoop.bind(window, 'mousemove', (mousemoveEvent) => {\n      if (dragStarted && !mousemoveEvent.which) {\n        // got a move event without mouse down which means we somehow missed the mouseup\n        handleMouseUp(mousemoveEvent);\n        return;\n      }\n\n      if (!dragStarted) {\n        if (lastX === mousemoveEvent.clientX && lastY === mousemoveEvent.clientY) {\n          console.warn(\n            'Got a mouse move event with ',\n            mousemoveEvent.clientX,\n            ',',\n            mousemoveEvent.clientY,\n            ' when the last position was ',\n            lastX,\n            ',',\n            lastY,\n          );\n        }\n        createAndFireCustomMouseEvent('grid-drag-start', downEvent, (dragStart: IGridDragStartEvent) => {\n          let onlyFixedRows = !calculateRowScrollDiff(mousemoveEvent);\n          let onlyFixedCols = !calculateColScrollDiff(mousemoveEvent);\n          dragStart.enableAutoScroll = () => {\n            if (unbindAutoScrollDrag) {\n              unbindAutoScrollDrag();\n            }\n            unbindAutoScrollDrag = grid.eventLoop.bind('grid-drag', (gridDragEvent) => {\n              // if it gets here then we will try to auto scroll\n              const newRowDiff = calculateRowScrollDiff(gridDragEvent);\n              onlyFixedRows = !newRowDiff;\n              const rowDiff = onlyFixedRows ? 0 : newRowDiff;\n\n              const newColDiff = calculateColScrollDiff;\n              onlyFixedCols = !newColDiff;\n              const colDiff = onlyFixedCols ? 0 : newColDiff(gridDragEvent);\n\n              if (scrollInterval != undefined) {\n                clearInterval(scrollInterval);\n              }\n              if (rowDiff || colDiff) {\n                scrollInterval = grid.interval(() => {\n                  grid.cellScrollModel.scrollTo(grid.cellScrollModel.row + rowDiff, grid.cellScrollModel.col + colDiff);\n                }, 100);\n              }\n            });\n          };\n        });\n        dragStarted = true;\n      }\n\n      createAndFireCustomMouseEvent('grid-drag', mousemoveEvent);\n\n      if (mousemoveEvent.row !== lastDragRow || mousemoveEvent.col !== lastDragCol) {\n        createAndFireCustomMouseEvent('grid-cell-drag', mousemoveEvent);\n\n        lastDragRow = mousemoveEvent.row;\n        lastDragCol = mousemoveEvent.col;\n      }\n    });\n\n    const unbindUp = grid.eventLoop.bind(window, 'mouseup', handleMouseUp);\n\n    function handleMouseUp(e: AnnotatedMouseEventUnion) {\n      if (scrollInterval != undefined) {\n        clearInterval(scrollInterval);\n      }\n      unbindMove();\n      unbindUp();\n      if (unbindAutoScrollDrag) {\n        unbindAutoScrollDrag();\n      }\n\n      const dragEnd = createCustomEventFromMouseEvent('grid-drag-end', e);\n\n      // row, col, x, and y should inherit\n      grid.eventLoop.fire(dragEnd);\n    }\n  }\n\n  function createCustomEventFromMouseEvent(type: GridCustomMouseEventTypes, e: AnnotatedMouseEventUnion) {\n    const event = customEvent(type, true, true) as IGridCustomMouseEvent;\n    PROPS_TO_COPY_FROM_MOUSE_EVENTS.forEach((prop: keyof AnnotatedMouseEventUnion) => {\n      (event as any)[prop] = e[prop];\n    });\n    event.originalEvent = e;\n    return event;\n  }\n\n  function createAndFireCustomMouseEvent(\n    type: GridCustomMouseEventTypes,\n    e: AnnotatedMouseEventUnion,\n    annotateEvent?: (e: ILoopEvent) => any,\n  ) {\n    let drag = createCustomEventFromMouseEvent(type, e);\n    if (annotateEvent) {\n      drag = annotateEvent(drag) || drag;\n    }\n    if (e.target) {\n      e.target.dispatchEvent(drag);\n    } else {\n      grid.eventLoop.fire(drag);\n    }\n    return drag;\n  }\n\n  return model;\n}\n\nexport default create;\n\n"],"mappings":";;;;;;AACA,IAAAA,cAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAaA,IAAME,+BAA+B,GAAgE,CACnG,SAAS,EACT,SAAS,EACT,OAAO,EACP,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,KAAK,EACL,KAAK,EACL,SAAS,EACT,SAAS,EACT,YAAY,EACZ,YAAY,CACb;AAkBD,SAAgBC,MAAMA,CAACC,IAAU;EAC/B,IAAIC,cAAkC;EACtC,IAAIC,WAA+B;EACnC,IAAIC,WAA+B;EACnC,IAAMC,KAAK,GAAoB;IAC7BC,OAAO,EAAE;MACPC,IAAI,EAAJ,SAAAA,CAAKC,CAAkB;QACrB,OAAOA,CAAC,CAACC,OAAO;MAClB,CAAC;MACDC,OAAO,EAAP,SAAAA,CAAQF,CAAkB;QACxB,OAAOA,CAAC,CAACG,UAAU;MACrB,CAAC;MACDC,IAAI,EAAJ,SAAAA,CAAKJ,CAAkB;QACrB,OAAOA,CAAC,CAACK,GAAG;MACd,CAAC;MACDC,MAAM,EAAN,SAAAA,CAAON,CAAuB;QAC5B,OAAOA,CAAC,CAACO,KAAK;MAChB,CAAC;MACDC,OAAO,EAAP,SAAAA,CAAQR,CAAmD;QACzD,OAAQA,CAAS,CAACS,MAAM;MAC1B;KACD;IACDC,OAAO,EAAE;MACPX,IAAI,EAAJ,SAAAA,CAAKC,CAAkB;QACrB,OAAOA,CAAC,CAACW,OAAO;MAClB,CAAC;MACDT,OAAO,EAAP,SAAAA,CAAQF,CAAkB;QACxB,OAAOA,CAAC,CAACY,UAAU;MACrB,CAAC;MACDR,IAAI,EAAJ,SAAAA,CAAKJ,CAAkB;QACrB,OAAOA,CAAC,CAACa,GAAG;MACd,CAAC;MACDP,MAAM,EAAN,SAAAA,CAAON,CAAuB;QAC5B,OAAOA,CAAC,CAACc,KAAK;MAChB,CAAC;MACDN,OAAO,EAAP,SAAAA,CAAQR,CAAmD;QACzD,OAAQA,CAAS,CAACe,MAAM;MAC1B;KACD;IACDC,cAAc,EAAd,SAAAA,CAAehB,CAAa;MAC1B,IAAIV,YAAA,CAAA2B,qBAAqB,CAACjB,CAAC,CAAC,EAAE;QAC5BH,KAAK,CAACqB,sBAAsB,CAAClB,CAAC,CAAC;;IAEnC,CAAC;IACDmB,4BAA4B,EAA5B,SAAAA,CAA6BnB,CAA2B,EAAEoB,OAAe,EAAEC,OAAe;MACxFrB,CAAC,CAACC,OAAO,GAAGmB,OAAO;MACnBpB,CAAC,CAACW,OAAO,GAAGU,OAAO;MACnBrB,CAAC,CAACG,UAAU,GAAGV,IAAI,CAACM,IAAI,CAACM,GAAG,CAACiB,SAAS,CAACtB,CAAC,CAACC,OAAO,CAAC;MACjDD,CAAC,CAACY,UAAU,GAAGnB,IAAI,CAACM,IAAI,CAACc,GAAG,CAACS,SAAS,CAACtB,CAAC,CAACW,OAAO,CAAC;MACjDX,CAAC,CAACK,GAAG,GAAGZ,IAAI,CAACS,OAAO,CAACG,GAAG,CAACkB,MAAM,CAACvB,CAAC,CAACG,UAAU,CAAC;MAC7CH,CAAC,CAACa,GAAG,GAAGpB,IAAI,CAACS,OAAO,CAACW,GAAG,CAACU,MAAM,CAACvB,CAAC,CAACY,UAAU,CAAC;MAC7C,OAAOZ,CAAC;IACV,CAAC;IACDkB,sBAAsB,EAAtB,SAAAA,CAAuBlB,CAA2B;MAChD,IAAMwB,CAAC,GAAG/B,IAAI,CAACgC,QAAQ,CAACC,OAAO,CAAC1B,CAAC,CAAC2B,OAAO,CAAC;MAC1C,IAAMC,CAAC,GAAGnC,IAAI,CAACgC,QAAQ,CAACI,OAAO,CAAC7B,CAAC,CAAC8B,OAAO,CAAC;MAC1C,IAAMV,OAAO,GAAG3B,IAAI,CAACsC,IAAI,CAACN,QAAQ,CAACO,YAAY,CAACR,CAAC,CAAC;MAClD,IAAMH,OAAO,GAAG5B,IAAI,CAACwC,IAAI,CAACR,QAAQ,CAACO,YAAY,CAACJ,CAAC,CAAC;MAClD/B,KAAK,CAACsB,4BAA4B,CAACnB,CAAC,EAAEoB,OAAO,EAAEC,OAAO,CAAC;MACvDrB,CAAC,CAACc,KAAK,GAAGc,CAAC;MACX5B,CAAC,CAACO,KAAK,GAAGiB,CAAC;IACb;GACD;EAED/B,IAAI,CAACyC,SAAS,CAACC,cAAc,CAAC,UAACnC,CAAa;IAC1CH,KAAK,CAACmB,cAAc,CAAChB,CAAC,CAAC;IACvB,IAAIV,YAAA,CAAA8C,2BAA2B,CAACpC,CAAC,EAAE,WAAW,CAAC,EAAE;MAC/C,IAAIA,CAAC,CAACqC,aAAa,KAAK5C,IAAI,CAAC6C,SAAS,EAAE;QACtCC,0BAA0B,CAACvC,CAAC,CAAC;;KAEhC,MAAM,IAAIV,YAAA,CAAA8C,2BAA2B,CAACpC,CAAC,EAAE,WAAW,CAAC,EAAE;MACtD,IAAIA,CAAC,CAACK,GAAG,KAAKV,WAAW,IAAIK,CAAC,CAACa,GAAG,KAAKjB,WAAW,EAAE;QAClD4C,6BAA6B,CAAC,sBAAsB,EAAExC,CAAC,CAAC;QACxDL,WAAW,GAAGK,CAAC,CAACK,GAAG;QACnBT,WAAW,GAAGI,CAAC,CAACa,GAAG;;;EAGzB,CAAC,CAAC;EAEF,SAAS4B,sBAAsBA,CAACzC,CAAmD;IACjF,IAAI0C,OAAO,GAAG,CAAC;IACf,IAAI1C,CAAC,CAAC8B,OAAO,IAAKrC,IAAI,CAAC6C,SAAS,IAAI7C,IAAI,CAAC6C,SAAS,CAACK,qBAAqB,EAAE,CAACC,KAAK,IAAKC,MAAM,CAACC,UAAU,CAAC,EAAE;MACvGJ,OAAO,GAAG,CAAC;KACZ,MAAM,IAAIjD,IAAI,CAACgC,QAAQ,CAACI,OAAO,CAAC7B,CAAC,CAAC8B,OAAO,CAAC,GAAGrC,IAAI,CAACsD,qBAAqB,CAACC,UAAU,EAAE,EAAE;MACrFN,OAAO,GAAG,CAAC,CAAC;;IAEd,OAAOA,OAAO;EAChB;EAEA,SAASO,sBAAsBA,CAACjD,CAAmD;IACjF,IAAIkD,OAAO,GAAG,CAAC;IACf,IAAIlD,CAAC,CAAC2B,OAAO,IAAKlC,IAAI,CAAC6C,SAAS,IAAI7C,IAAI,CAAC6C,SAAS,CAACK,qBAAqB,EAAE,CAACQ,MAAM,IAAKN,MAAM,CAACO,WAAW,CAAC,EAAE;MACzGF,OAAO,GAAG,CAAC;KACZ,MAAM,IAAIzD,IAAI,CAACgC,QAAQ,CAACC,OAAO,CAAC1B,CAAC,CAAC2B,OAAO,CAAC,GAAGlC,IAAI,CAACsD,qBAAqB,CAACM,WAAW,EAAE,EAAE;MACtFH,OAAO,GAAG,CAAC,CAAC;;IAEd,OAAOA,OAAO;EAChB;EAEA,SAASX,0BAA0BA,CAACe,SAAmC;IACrE,IAAIC,WAAW,GAAGD,SAAS,CAACjD,GAAG;IAC/B,IAAImD,WAAW,GAAGF,SAAS,CAACzC,GAAG;IAC/B,IAAI4C,WAAW,GAAG,KAAK;IACvB,IAAIC,oBAA8C;IAClD,IAAMC,KAAK,GAAGL,SAAS,CAACxB,OAAO;IAC/B,IAAM8B,KAAK,GAAGN,SAAS,CAAC3B,OAAO;IAC/B,IAAMkC,UAAU,GAAGpE,IAAI,CAACyC,SAAS,CAAC4B,IAAI,CAACjB,MAAM,EAAE,WAAW,EAAE,UAACkB,cAAc;MACzE,IAAIN,WAAW,IAAI,CAACM,cAAc,CAACC,KAAK,EAAE;QAExCC,aAAa,CAACF,cAAc,CAAC;QAC7B;;MAGF,IAAI,CAACN,WAAW,EAAE;QAChB,IAAIE,KAAK,KAAKI,cAAc,CAACjC,OAAO,IAAI8B,KAAK,KAAKG,cAAc,CAACpC,OAAO,EAAE;UACxEuC,OAAO,CAACC,IAAI,CACV,8BAA8B,EAC9BJ,cAAc,CAACjC,OAAO,EACtB,GAAG,EACHiC,cAAc,CAACpC,OAAO,EACtB,8BAA8B,EAC9BgC,KAAK,EACL,GAAG,EACHC,KAAK,CACN;;QAEHpB,6BAA6B,CAAC,iBAAiB,EAAEc,SAAS,EAAE,UAACc,SAA8B;UACzF,IAAIC,aAAa,GAAG,CAACpB,sBAAsB,CAACc,cAAc,CAAC;UAC3D,IAAIO,aAAa,GAAG,CAAC7B,sBAAsB,CAACsB,cAAc,CAAC;UAC3DK,SAAS,CAACG,gBAAgB,GAAG;YAC3B,IAAIb,oBAAoB,EAAE;cACxBA,oBAAoB,EAAE;;YAExBA,oBAAoB,GAAGjE,IAAI,CAACyC,SAAS,CAAC4B,IAAI,CAAC,WAAW,EAAE,UAACU,aAAa;cAEpE,IAAMC,UAAU,GAAGxB,sBAAsB,CAACuB,aAAa,CAAC;cACxDH,aAAa,GAAG,CAACI,UAAU;cAC3B,IAAMvB,OAAO,GAAGmB,aAAa,GAAG,CAAC,GAAGI,UAAU;cAE9C,IAAMC,UAAU,GAAGjC,sBAAsB;cACzC6B,aAAa,GAAG,CAACI,UAAU;cAC3B,IAAMhC,OAAO,GAAG4B,aAAa,GAAG,CAAC,GAAGI,UAAU,CAACF,aAAa,CAAC;cAE7D,IAAI9E,cAAc,IAAIiF,SAAS,EAAE;gBAC/BC,aAAa,CAAClF,cAAc,CAAC;;cAE/B,IAAIwD,OAAO,IAAIR,OAAO,EAAE;gBACtBhD,cAAc,GAAGD,IAAI,CAACoF,QAAQ,CAAC;kBAC7BpF,IAAI,CAACqF,eAAe,CAACC,QAAQ,CAACtF,IAAI,CAACqF,eAAe,CAACzE,GAAG,GAAG6C,OAAO,EAAEzD,IAAI,CAACqF,eAAe,CAACjE,GAAG,GAAG6B,OAAO,CAAC;gBACvG,CAAC,EAAE,GAAG,CAAC;;YAEX,CAAC,CAAC;UACJ,CAAC;QACH,CAAC,CAAC;QACFe,WAAW,GAAG,IAAI;;MAGpBjB,6BAA6B,CAAC,WAAW,EAAEuB,cAAc,CAAC;MAE1D,IAAIA,cAAc,CAAC1D,GAAG,KAAKkD,WAAW,IAAIQ,cAAc,CAAClD,GAAG,KAAK2C,WAAW,EAAE;QAC5EhB,6BAA6B,CAAC,gBAAgB,EAAEuB,cAAc,CAAC;QAE/DR,WAAW,GAAGQ,cAAc,CAAC1D,GAAG;QAChCmD,WAAW,GAAGO,cAAc,CAAClD,GAAG;;IAEpC,CAAC,CAAC;IAEF,IAAMmE,QAAQ,GAAGvF,IAAI,CAACyC,SAAS,CAAC4B,IAAI,CAACjB,MAAM,EAAE,SAAS,EAAEoB,aAAa,CAAC;IAEtE,SAASA,aAAaA,CAACjE,CAA2B;MAChD,IAAIN,cAAc,IAAIiF,SAAS,EAAE;QAC/BC,aAAa,CAAClF,cAAc,CAAC;;MAE/BmE,UAAU,EAAE;MACZmB,QAAQ,EAAE;MACV,IAAItB,oBAAoB,EAAE;QACxBA,oBAAoB,EAAE;;MAGxB,IAAMuB,OAAO,GAAGC,+BAA+B,CAAC,eAAe,EAAElF,CAAC,CAAC;MAGnEP,IAAI,CAACyC,SAAS,CAACiD,IAAI,CAACF,OAAO,CAAC;IAC9B;EACF;EAEA,SAASC,+BAA+BA,CAACE,IAA+B,EAAEpF,CAA2B;IACnG,IAAMqF,KAAK,GAAGjG,cAAA,CAAAkG,OAAW,CAACF,IAAI,EAAE,IAAI,EAAE,IAAI,CAA0B;IACpE7F,+BAA+B,CAACgG,OAAO,CAAC,UAACC,IAAoC;MAC1EH,KAAa,CAACG,IAAI,CAAC,GAAGxF,CAAC,CAACwF,IAAI,CAAC;IAChC,CAAC,CAAC;IACFH,KAAK,CAACI,aAAa,GAAGzF,CAAC;IACvB,OAAOqF,KAAK;EACd;EAEA,SAAS7C,6BAA6BA,CACpC4C,IAA+B,EAC/BpF,CAA2B,EAC3B0F,aAAsC;IAEtC,IAAIC,IAAI,GAAGT,+BAA+B,CAACE,IAAI,EAAEpF,CAAC,CAAC;IACnD,IAAI0F,aAAa,EAAE;MACjBC,IAAI,GAAGD,aAAa,CAACC,IAAI,CAAC,IAAIA,IAAI;;IAEpC,IAAI3F,CAAC,CAAC4F,MAAM,EAAE;MACZ5F,CAAC,CAAC4F,MAAM,CAACC,aAAa,CAACF,IAAI,CAAC;KAC7B,MAAM;MACLlG,IAAI,CAACyC,SAAS,CAACiD,IAAI,CAACQ,IAAI,CAAC;;IAE3B,OAAOA,IAAI;EACb;EAEA,OAAO9F,KAAK;AACd;AArNAiG,OAAA,CAAAtG,MAAA,GAAAA,MAAA;AAuNAsG,OAAA,CAAAR,OAAA,GAAe9F,MAAM","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}