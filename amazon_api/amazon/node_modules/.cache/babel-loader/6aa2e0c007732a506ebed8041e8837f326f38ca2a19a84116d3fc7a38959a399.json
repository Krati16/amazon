{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.add = void 0;\nfunction add(grid, model) {\n  if (model === void 0) {\n    model = {};\n  }\n  var api = Object.assign(model, {\n    _decorators: {},\n    makeDecorator: model.makeDecorator || makeDecorator\n  });\n  function makeDecorator(col) {\n    var decorator = grid.decorators.create(0, col, 1, 1, 'cell', 'real');\n    decorator.getDecoratorLeft = function () {\n      var firstRect = decorator.boundingBox && decorator.boundingBox.getClientRects && decorator.boundingBox.getClientRects()[0];\n      return firstRect && grid.viewPort.toGridX(firstRect.left) || 0;\n    };\n    if (api.annotateDecorator) {\n      api.annotateDecorator(decorator);\n    }\n    return decorator;\n  }\n  api.makeDecorator = api.makeDecorator || makeDecorator;\n  function ensureDecoratorPerCol() {\n    for (var c = 0; c < grid.viewPort.cols; c++) {\n      if (!api._decorators[c]) {\n        if (api.isNeeded && !api.isNeeded(c)) {\n          continue;\n        }\n        var decorator = api.makeDecorator(c);\n        api._decorators[c] = decorator;\n        grid.decorators.add(decorator);\n      }\n    }\n  }\n  grid.eventLoop.bind('grid-viewport-change', function () {\n    ensureDecoratorPerCol();\n  });\n  ensureDecoratorPerCol();\n  return api;\n}\nexports.add = add;\nexports.default = add;","map":{"version":3,"names":["add","grid","model","api","Object","assign","_decorators","makeDecorator","col","decorator","decorators","create","getDecoratorLeft","firstRect","boundingBox","getClientRects","viewPort","toGridX","left","annotateDecorator","ensureDecoratorPerCol","c","cols","isNeeded","eventLoop","bind","exports","default"],"sources":["C:\\amazon\\amazon\\node_modules\\grid\\src\\modules\\header-decorators\\index.ts"],"sourcesContent":["import { Grid } from '../core';\nimport { IDecorator } from '../decorators';\n\nexport interface IHeaderDecorator extends IDecorator {\n    getDecoratorLeft(): number;\n}\n\nexport interface IHeaderDecoratorCreator {\n    makeDecorator?(c: number): IHeaderDecorator;\n    annotateDecorator?(h: IHeaderDecorator): void;\n    isNeeded?(c: number): boolean;\n}\n\nexport interface IHeaderDecoratorModel extends IHeaderDecoratorCreator {\n    _decorators: { [key: number]: IHeaderDecorator | undefined };\n    makeDecorator(c: number): IHeaderDecorator;\n}\n\nexport function add(grid: Grid, model: IHeaderDecoratorCreator = {}) {\n    // tslint:disable-next-line:prefer-object-spread\n    const api: IHeaderDecoratorModel = Object.assign(model, { _decorators: {}, makeDecorator: model.makeDecorator || makeDecorator });\n\n    function makeDecorator(col: number) {\n        const decorator = grid.decorators.create(0, col, 1, 1, 'cell', 'real') as IHeaderDecorator;\n\n        decorator.getDecoratorLeft = () => {\n            const firstRect = decorator.boundingBox &&\n                decorator.boundingBox.getClientRects &&\n                decorator.boundingBox.getClientRects()[0];\n            return firstRect && grid.viewPort.toGridX(firstRect.left) || 0;\n        };\n\n        if (api.annotateDecorator) {\n            api.annotateDecorator(decorator);\n        }\n\n        return decorator;\n    }\n\n    api.makeDecorator = api.makeDecorator || makeDecorator;\n\n    function ensureDecoratorPerCol() {\n        for (let c = 0; c < grid.viewPort.cols; c++) {\n            if (!api._decorators[c]) {\n                if (api.isNeeded && !api.isNeeded(c)) {\n                    continue;\n                }\n                const decorator = api.makeDecorator(c);\n                api._decorators[c] = decorator;\n                grid.decorators.add(decorator);\n            }\n        }\n    }\n\n    grid.eventLoop.bind('grid-viewport-change', () => {\n        ensureDecoratorPerCol();\n    });\n    ensureDecoratorPerCol();\n\n    return api;\n}\n\nexport default add;"],"mappings":";;;;;;AAkBA,SAAgBA,GAAGA,CAACC,IAAU,EAAEC,KAAmC;EAAnC,IAAAA,KAAA;IAAAA,KAAA,KAAmC;EAAA;EAE/D,IAAMC,GAAG,GAA0BC,MAAM,CAACC,MAAM,CAACH,KAAK,EAAE;IAAEI,WAAW,EAAE,EAAE;IAAEC,aAAa,EAAEL,KAAK,CAACK,aAAa,IAAIA;EAAa,CAAE,CAAC;EAEjI,SAASA,aAAaA,CAACC,GAAW;IAC9B,IAAMC,SAAS,GAAGR,IAAI,CAACS,UAAU,CAACC,MAAM,CAAC,CAAC,EAAEH,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,CAAqB;IAE1FC,SAAS,CAACG,gBAAgB,GAAG;MACzB,IAAMC,SAAS,GAAGJ,SAAS,CAACK,WAAW,IACnCL,SAAS,CAACK,WAAW,CAACC,cAAc,IACpCN,SAAS,CAACK,WAAW,CAACC,cAAc,EAAE,CAAC,CAAC,CAAC;MAC7C,OAAOF,SAAS,IAAIZ,IAAI,CAACe,QAAQ,CAACC,OAAO,CAACJ,SAAS,CAACK,IAAI,CAAC,IAAI,CAAC;IAClE,CAAC;IAED,IAAIf,GAAG,CAACgB,iBAAiB,EAAE;MACvBhB,GAAG,CAACgB,iBAAiB,CAACV,SAAS,CAAC;;IAGpC,OAAOA,SAAS;EACpB;EAEAN,GAAG,CAACI,aAAa,GAAGJ,GAAG,CAACI,aAAa,IAAIA,aAAa;EAEtD,SAASa,qBAAqBA,CAAA;IAC1B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpB,IAAI,CAACe,QAAQ,CAACM,IAAI,EAAED,CAAC,EAAE,EAAE;MACzC,IAAI,CAAClB,GAAG,CAACG,WAAW,CAACe,CAAC,CAAC,EAAE;QACrB,IAAIlB,GAAG,CAACoB,QAAQ,IAAI,CAACpB,GAAG,CAACoB,QAAQ,CAACF,CAAC,CAAC,EAAE;UAClC;;QAEJ,IAAMZ,SAAS,GAAGN,GAAG,CAACI,aAAa,CAACc,CAAC,CAAC;QACtClB,GAAG,CAACG,WAAW,CAACe,CAAC,CAAC,GAAGZ,SAAS;QAC9BR,IAAI,CAACS,UAAU,CAACV,GAAG,CAACS,SAAS,CAAC;;;EAG1C;EAEAR,IAAI,CAACuB,SAAS,CAACC,IAAI,CAAC,sBAAsB,EAAE;IACxCL,qBAAqB,EAAE;EAC3B,CAAC,CAAC;EACFA,qBAAqB,EAAE;EAEvB,OAAOjB,GAAG;AACd;AA1CAuB,OAAA,CAAA1B,GAAA,GAAAA,GAAA;AA4CA0B,OAAA,CAAAC,OAAA,GAAe3B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}