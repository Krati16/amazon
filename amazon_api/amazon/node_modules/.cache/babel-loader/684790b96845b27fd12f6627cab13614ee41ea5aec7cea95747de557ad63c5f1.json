{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = void 0;\nfunction create(grid) {\n  var api = {\n    _decorators: {}\n  };\n  function setColShowing(col) {\n    grid.colModel.get(col).hidden = false;\n  }\n  function doWhileHidden(col, fn, inc) {\n    var colDescriptor;\n    while ((colDescriptor = grid.colModel.get(col)) !== undefined && colDescriptor.hidden) {\n      if (fn) {\n        fn(col);\n      }\n      col = col + inc;\n    }\n    return col;\n  }\n  function createDecorator(col, right) {\n    var headerDecorator = grid.decorators.create(0, col, 1, 1, 'cell', 'virtual');\n    headerDecorator.postRender = function (div) {\n      if (right) {\n        div.style.transform = 'translate(50%, -50%)';\n        div.style.webkitTransform = 'translate(50%, -50%)';\n        div.style.removeProperty('left');\n      } else {\n        div.style.transform = 'translate(-50%, -50%)';\n        div.style.webkitTransform = 'translate(-50%, -50%)';\n        div.style.removeProperty('right');\n      }\n      div.style.removeProperty('bottom');\n      div.style.top = '50%';\n      div.setAttribute('class', 'show-hidden-cols');\n      div.setAttribute('dts', 'grid_column_unhide_btn');\n      grid.eventLoop.bind(div, 'click', function () {\n        var inc = right ? 1 : -1;\n        doWhileHidden(col + inc, setColShowing, inc);\n      });\n    };\n    return headerDecorator;\n  }\n  function maybeRemoveDecorator(col) {\n    if (api._decorators[col]) {\n      var decorator = api._decorators[col];\n      if (decorator !== undefined) {\n        grid.decorators.remove(decorator);\n        api._decorators[col] = undefined;\n      }\n    }\n  }\n  grid.eventLoop.bind('grid-col-change', function (e) {\n    if (e.action === 'hide' || e.action === 'add') {\n      e.descriptors.forEach(function (descriptor) {\n        var col = descriptor.index;\n        if (!col && col !== 0) {\n          return;\n        }\n        if (descriptor.hidden) {\n          var decCol = col;\n          var showingCol = doWhileHidden(col, undefined, -1);\n          var rightSide = showingCol !== -1;\n          if (!rightSide) {\n            showingCol = doWhileHidden(col, undefined, 1);\n          }\n          decCol = showingCol;\n          maybeRemoveDecorator(col);\n          var decorator = createDecorator(decCol, rightSide);\n          grid.decorators.add(decorator);\n          api._decorators[col] = decorator;\n        } else {\n          maybeRemoveDecorator(col);\n        }\n      });\n    }\n  });\n  return api;\n}\nexports.create = create;\nexports.default = create;","map":{"version":3,"names":["create","grid","api","_decorators","setColShowing","col","colModel","get","hidden","doWhileHidden","fn","inc","colDescriptor","undefined","createDecorator","right","headerDecorator","decorators","postRender","div","style","transform","webkitTransform","removeProperty","top","setAttribute","eventLoop","bind","maybeRemoveDecorator","decorator","remove","e","action","descriptors","forEach","descriptor","index","decCol","showingCol","rightSide","add","exports","default"],"sources":["C:\\amazon\\amazon\\node_modules\\grid\\src\\modules\\show-hidden-cols\\index.ts"],"sourcesContent":["import { Grid } from '../core';\nimport { IDecorator } from '../decorators';\n\nexport interface IShowHiddenCols {\n    _decorators: { [key: number]: IDecorator | undefined };\n}\n\nexport function create(grid: Grid) {\n    const api: IShowHiddenCols = {\n        _decorators: {}\n    };\n\n    function setColShowing(col: number) {\n        grid.colModel.get(col).hidden = false;\n    }\n\n    function doWhileHidden(col: number, fn: ((c: number) => void) | undefined, inc: number) {\n        let colDescriptor;\n        // tslint:disable-next-line:no-conditional-assignment\n        while ((colDescriptor = grid.colModel.get(col)) !== undefined && colDescriptor.hidden) {\n            if (fn) {\n                fn(col);\n            }\n            col = col + inc;\n        }\n        return col;\n    }\n\n    function createDecorator(col: number, right: boolean) {\n        const headerDecorator = grid.decorators.create(0, col, 1, 1, 'cell', 'virtual');\n\n        headerDecorator.postRender = (div) => {\n\n            if (right) {\n                div.style.transform = 'translate(50%, -50%)';\n                div.style.webkitTransform = 'translate(50%, -50%)';\n                div.style.removeProperty('left');\n            } else {\n                div.style.transform = 'translate(-50%, -50%)';\n                div.style.webkitTransform = 'translate(-50%, -50%)';\n                div.style.removeProperty('right');\n            }\n            div.style.removeProperty('bottom');\n            div.style.top = '50%';\n            div.setAttribute('class', 'show-hidden-cols');\n            div.setAttribute('dts', 'grid_column_unhide_btn');\n\n            grid.eventLoop.bind(div, 'click', () => {\n                const inc = right ? 1 : -1;\n                doWhileHidden(col + inc, setColShowing, inc);\n            });\n        };\n        return headerDecorator;\n    }\n\n    function maybeRemoveDecorator(col: number) {\n        if (api._decorators[col]) {\n            const decorator = api._decorators[col];\n            if (decorator !== undefined) {\n                grid.decorators.remove(decorator);\n                api._decorators[col] = undefined;\n            }\n        }\n    }\n\n    grid.eventLoop.bind('grid-col-change', (e) => {\n        if (e.action === 'hide' || e.action === 'add') {\n            e.descriptors.forEach((descriptor) => {\n                const col = descriptor.index;\n                if (!col && col !== 0) {\n                    return;\n                }\n                if (descriptor.hidden) {\n                    let decCol = col;\n                    let showingCol = doWhileHidden(col, undefined, -1);\n                    const rightSide = showingCol !== -1;\n                    if (!rightSide) {\n                        // we actually have to backtrack to the last showing column\n                        showingCol = doWhileHidden(col, undefined, 1);\n                    }\n                    decCol = showingCol;\n                    maybeRemoveDecorator(col);\n                    const decorator = createDecorator(decCol, rightSide);\n                    grid.decorators.add(decorator);\n                    api._decorators[col] = decorator;\n                } else {\n                    maybeRemoveDecorator(col);\n                }\n            });\n        }\n    });\n\n    return api;\n}\n\nexport default create;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}